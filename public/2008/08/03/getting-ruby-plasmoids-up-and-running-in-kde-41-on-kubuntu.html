<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Getting Ruby Plasmoids up and running in KDE 4.1 (on Kubuntu)</title>
  <meta name="description" content="NOTE: THIS ARTICLE IS NOT YET COMPLETE. IF YOU FOLLOW IT THEN YOU WILL GO A LONG WAY BUT THE PLASMOID IS NOT YET DISPLAYING. SEE THE ‘Run your applet’ SECTIO...">

  <link rel="canonical" href="http://www.theirishpenguin.com/2008/08/03/getting-ruby-plasmoids-up-and-running-in-kde-41-on-kubuntu.html">
  <link rel="alternate" type="application/rss+xml" title="The Irish Penguin" href="http://www.theirishpenguin.com/feed.xml" />

  <!-- Material Design Lite css Library -->
  <!--<link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/code.getmdl.io/1.0.0/material.indigo-pink.min.css">-->
  <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.brown-pink.min.css" />
  
  <!-- Material Design Fonts -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <!-- Custom theme css -->
  <link rel="stylesheet" href="/css/main.css">

  <!-- Twitter cards -->
  <meta name="twitter:site"    content="@theirishpenguin">
  <meta name="twitter:creator" content="@theirishpenguin">
  <meta name="twitter:title"   content="Getting Ruby Plasmoids up and running in KDE 4.1 (on Kubuntu)">

  
  <meta name="twitter:description" content="NOTE: THIS ARTICLE IS NOT YET COMPLETE. IF YOU FOLLOW IT THEN YOU WILL GO A LONG WAY BUT THE PLASMOID IS NOT YET DISPLAYING. SEE THE ‘Run your applet’ SECTION NEA...">
  

  
  <meta name="twitter:card"  content="summary">
  <meta name="twitter:image" content="http://www.theirishpenguin.com/images/coffee_avatar.jpg">
  
  <!-- end of Twitter cards -->
</head>


  <body>

    <!-- Start Layout -->
    
    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <!-- search layout -->
<div class="super-search" id="js-search">
  <ul class="super-search__results" id="js-search__results"></ul>        
  <button class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored super-search__close-btn" onclick="superSearch.toggle()">
    <i class="material-icons">close</i>
  </button>
</div>
<!-- /end search -->
        <header class="mdl-layout__header">

    <div class="mdl-layout__header-row">
      <!-- Title -->
      <span class="mdl-layout-title"><a class="penguin-site-title-link" href="http://www.theirishpenguin.com">The Irish Penguin <span class="mdl-cell--hide-phone"> - Sorry About The Word Count</span></a></span>
      <!-- Add spacer, to align navigation to the right -->
      <div class="mdl-layout-spacer"></div>
      

      <!-- Penguin: Disabling for now -->
      <!--
      <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable is-upgraded">
        <label class="mdl-button mdl-js-button mdl-button--icon" for="js-search__input">
          <i class="material-icons">search</i>
        </label>

        <div class="mdl-textfield__expandable-holder" >
          <input class="mdl-textfield__input super-search__input" type="text" id="js-search__input" />
        </div>
      </div>
      -->
      <!-- End of Penguin: Disabling for now -->

      <button class="mdl-button mdl-js-button mdl-button--icon" id="menu-lower-left">
        <i class="material-icons">more_vert</i>
      </button>

      <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="menu-lower-left">
        
        <li><a href="https://twitter.com/theirishpenguin" class="mdl-menu__item">Twitter</a></li>
        
        <li><a href="https://github.com/theirishpenguin" class="mdl-menu__item">Github</a></li>
        
        <li><a href="http://www.rubyireland.com" class="mdl-menu__item">Ruby Ireland</a></li>
        
        <li><a href="/feed.xml" class="mdl-menu__item">Subscribe via RSS</a></li>
        
        <li><a href="/about.html" class="mdl-menu__item">About</a></li>
        
      </ul>
    </div>
  </header>

  <!--
  <div class="mdl-layout__drawer">
    <span class="mdl-layout-title">Menu</span>
    <nav class="mdl-navigation">
    
      
      <a class="mdl-navigation__link" href="/about.html">About</a>
      
    
      
    
      
    
      
    
      
      <a class="mdl-navigation__link" href="/print-water.txt">Why Religion As a Belief May Not Hold Water</a>
      
    
    </nav>

  </div>
  -->


    

    <div class="post-ribbon"></div>
<main class="post-main mdl-layout__content">
  <div class="post-container mdl-grid">
    <div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"></div>
    <div class="post-section mdl-color--white mdl-shadow--4dp content mdl-color-text--grey-800 mdl-cell mdl-cell--8-col">
      <div class="mdl-color-text--grey-500">
      Aug 3, 2008 •  
      </div>
      <h3>Getting Ruby Plasmoids up and running in KDE 4.1 (on Kubuntu)</h3>
      <article class="post-content">
        <p><p><strong>NOTE:</strong> THIS ARTICLE IS NOT YET COMPLETE. IF YOU FOLLOW IT THEN YOU WILL GO A LONG WAY BUT THE PLASMOID IS NOT YET DISPLAYING. SEE THE ‘Run your applet’ SECTION NEAR THE END OF THIS ARTICLE BEFORE PROCEEDING.</p>

<h3 id="introduction">Introduction</h3>
<p>KDE 4.1 is an absolutely terrific release of the KDE desktop, licking most of the issues presented in the original 4.0 release. Although it is still an early adopter release, 4.1 will be of interest to techie’s who want to get their mitts on a sexy new graphical interface and is reasonably stable for daily usage. Not quite ready for Aunt Tillie yet though! One of the nicest features is the beauty and simplicity of Plasmoids and these super flexible little gadgets can now be written in Ruby - well almost!</p>

<p>This guide assumes that you’re using Kubuntu Hardy Heron. But you should be able to adjust the instructions for any distro.</p>

<ul>
  <li>
    <p>The starting point for our tour is to have Ruby installed. Google this if you’re unsure as to whether or not it’s installed.</p>
  </li>
  <li>
    <p>We need to install cmake via ‘sudo aptitude install cmake’. This is a cross-platform build system, similar to make.</p>
  </li>
  <li>
    <p>It’s likely that you will need to install the build UNIX build tools via ‘aptitude search build-essential’.</p>
  </li>
</ul>

<h3 id="get-coding">Get coding!</h3>
<p>And now you’re be ready to go. The main tutorial out there on Ruby Plasmoids at time of writing is the <a href="http://techbase.kde.org/Development/Tutorials/Plasma/RubyApplet">Ruby Applet tutorial on KDE Techbase</a>. This is a very good, well written guide on creating a simple Ruby applet in which a web browser is embeded inside the plasmoid. But the guide has a couple of gotcha’s, especially for the newbie (myself included!), so we have listed solutions to these problems as we go. In summary, use our article as an supplement to KDE Techbase’s.</p>

<p>Ok, to start with a demo everyone wants a nicely packaged directory of files, so let’s quickly put together the basic directory structure for our plasmoid - it’s pretty simple!</p>

<ul>
  <li>
    <p>Create a directory called ‘ruby-web-applet’</p>
  </li>
  <li>
    <p>Save the files <a href="http://websvn.kde.org/trunk/KDE/kdebindings/ruby/plasma/examples/applets/webapplet/plasma-ruby-applet-web.desktop?view=markup">plasma-ruby-applet-web.desktop</a> and <a href="http://websvn.kde.org/trunk/KDE/kdebindings/ruby/plasma/examples/applets/webapplet/web_applet.rb?view=markup">web_applet.rb</a> into this directory.</p>
  </li>
  <li>
    <p>Create a file called CMakeLists.txt under your ruby-web-applet directory and paste the following code into it</p>

    <p>set(SERVICES_INSTALL_DIR /usr/lib/kde4/share/kde4/services/)
set(DATA_INSTALL_DIR /usr/lib/kde4/share/kde4/apps/)</p>

    <p>FIND_PACKAGE (Ruby REQUIRED)</p>

    <p>include_directories( ${RUBY_INCLUDE_PATH} )
install(FILES plasma-ruby-applet-web.desktop DESTINATION ${SERVICES_INSTALL_DIR})
install(FILES web_applet.rb DESTINATION ${DATA_INSTALL_DIR}/plasma_ruby_web_applet)</p>
  </li>
</ul>

<h3 id="go-to-kde-techbase">Go to KDE Techbase</h3>
<p>Once you have the above directory in place, go and read the <a href="http://techbase.kde.org/Development/Tutorials/Plasma/RubyApplet">Ruby Applet tutorial on KDE Techbase</a> article down to just before the ‘Install and test the Applet’ paragraph. This will teach you what’s going on in the code. At that point come back to me as I’ll go into a little more detail on the final installation procedure!</p>

<h3 id="youre-back">You’re back!</h3>
<p>Great! Ok, so we have the files on disk, you have a good idea of what the code is doing, now let’s install it and kick your plasmoid into action!</p>

<p>Open the CMakeLists.txt file listed above in a text editor. Change the path listed for KDE4 services and data directories to the ones on your system. These are the lines to change.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>set(SERVICES_INSTALL_DIR /usr/lib/kde4/share/kde4/services/)
set(DATA_INSTALL_DIR /usr/lib/kde4/share/kde4/apps/)
</code></pre>
</div>

<blockquote>
  <p>Do this by replacing ‘/usr/lib/kde4/share/kde4/services/’ with the output of the command ‘kde4-config –install services’ and replace ‘/usr/lib/kde4/share/kde4/apps/’ with the output of the command ‘kde4-config –install data’ command. If you are using Kubuntu then they should be the same as mine but otherwise you may need to change them.</p>
</blockquote>

<p>Then make sure you are inside your ruby-web-applet directory and type</p>

<blockquote>
  <p>cmake .</p>
</blockquote>

<p>to generate nice makefiles for you which the make command can then use. Don’t forget the trailing dot! Now type ‘make’ and ‘sudo make install’. This will install your plasmoid code into the KDE4 services directory (you can see where this is by running ‘kde4-config –install services’) and your plasmoid data into the KDE4 data directory (you can see where this is by running ‘kde4-config –install data’). Effectively, the installation just involves the two files - plasma-ruby-applet-web.desktop web_applet.rb. If it’s worked then you’ll get output like</p>

<blockquote>
  <p>Install the project…
– Install configuration: “”
– Installing: /usr/lib/kde4/share/kde4/services/plasma-ruby-applet-web.desktop
– Installing: /usr/lib/kde4/share/kde4/apps/plasma_ruby_web_applet/web_applet.rb</p>
</blockquote>

<p>The applet is now installed!</p>

<h3 id="run-your-applet-this-does-not-work-yet">Run your applet (THIS DOES NOT WORK YET)</h3>
<p>There are two ways to do this. In a developer kind of way you can run ‘kbuildsycoca4’ from the command line followed by ‘plasmoidviewer plasma-ruby-web-applet’. Unfortunately this currently brings up the error</p>

<div class="highlighter-rouge"><pre class="highlight"><code>findServiceByDesktopPath:  not found
findServiceByDesktopPath:  not found
</code></pre>
</div>

<p>**IF YOU HAVE A SOLUTION TO THIS THEN PLEASE COMMENT BELOW!!! **</p>

<p>As a user, the cmake/make/make install procedure should have done all the necessary to install your plasmoid and you can activate it by going to the right of the task bar and clicking the Add Widgets icon. You should see your plasmoid listed but unfortunately this is not yet working - presumably for the same reason as the above. Oh well, I’m sure a solution will soon be posted. Until then, happy hackin!</p>

<h3 id="final-notes">Final notes</h3>

<p>Note that the KDE techbase article provides a version of this file but it didn’t work for me because</p>

<ul>
  <li>
    <p>I knew nothing about cmake or cmake files and I didn’t even cop that right clicking on the CMakeLists.txt file link in their article and saving it to disk would also save a load of HTML into the file</p>
  </li>
  <li>
    <p>The line ‘FIND_PACKAGE (RUBY REQUIRED)’ should really be ‘FIND_PACKAGE (Ruby REQUIRED)’ as it’s case sensitive and will otherwise give you the error</p>
  </li>
</ul>

<blockquote>
  <p>CMake Error at CMakeLists.txt:6 (FIND_PACKAGE):
find_package could not find module FindRUBY.cmake or a configuration file for package RUBY.</p>
</blockquote>

<p>Adjust CMAKE_MODULE_PATH to find FindRUBY.cmake or set RUBY_DIR to the directory containing a CMake configuration file for RUBY.  The file will have one of the following names:</p>

<p>RUBYConfig.cmake
ruby-config.cmake</p>

<ul>
  <li>
    <p>The destination targets specified in the file didn’t work for me. Perhaps some environment variables need to be set somewhere</p>
  </li>
  <li>
    <p>I didn’t even know how to use cmake! Or that you needed to follow it up with ‘make’. Anyway we’ll come cover this soon!</p>
  </li>
</ul>

<p>I didn’t need to set any CMAKE_MODULE_PATH but if you are having troubles with this then it’s at /usr/share/cmake-2.6/Modules/ on Kubuntu Hardy Heron. You may be able to set it in your script if your having difficulties as follows ‘set(CMAKE_MODULE_PATH /usr/share/cmake-2.6/Modules/)’. Again I haven’t tried this my self!</p>
</p>
      </article>
      <!-- Disqus comments -->
      
      <div>
        <h3>Comments</h3>
        <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'theirishpenguin';
        var disqus_developer = 0; // developer mode is on
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>

      </div>
      
    </div>
  </div>
</main>

    <footer class="mdl-mega-footer">
  <div class="mdl-mega-footer--middle-section">

    <div class="mdl-mega-footer--drop-down-section">
      <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked>
      <h1 class="mdl-mega-footer--heading">INFO</h1>
      <ul class="mdl-mega-footer--link-list">
        <li><a href="mailto:"></a></li>
        <li><a href="/feed.xml">subscribe via RSS</a></li>
      </ul>
    </div>

    <div class="mdl-mega-footer--drop-down-section">
      <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked>
      <h1 class="mdl-mega-footer--heading">SOCIAL</h1>
      <ul class="mdl-mega-footer--link-list">
        
        <li>
          <a href="https://github.com/theirishpenguin">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">theirishpenguin</span>
          </a>
        </li>
        
        
        <li>
          <a href="https://twitter.com/theirishpenguin">
            <span class="icon  icon--twitter">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
              </svg>
            </span>

            <span class="username">theirishpenguin</span>
          </a>
        </li>
      
	  
      
	  
	  
      </ul>
    </div>

    <div class="mdl-mega-footer--drop-down-section">
      <input class="mdl-mega-footer--heading-checkbox" type="checkbox" checked>
      <h1 class="mdl-mega-footer--heading">ABOUT</h1>
      <ul class="mdl-mega-footer--link-list">
        <li>Ruby/JS dev. One eye on design. Occasionally stops writing code and starts writing words when the Internet is down. Thoughts and opinions expressed here are my own.
</li>
      </ul>
    </div>


  </div>

  <div class="mdl-mega-footer--bottom-section">
  <!-- Penguin: Disabling for now
    <div class="mdl-logo">The Irish Penguin</div>
    -->
    <ul class="mdl-mega-footer--link-list">
    <li>&copy; 2019 theirishpenguin All Rights Reserved</li>
  <!-- Penguin: Disabling for now
      <li><a href="#">Help</a></li>
      <li><a href="#">Privacy & Terms</a></li>
    -->
    </ul>
  </div>

</footer>


    </div>
    <!-- /End Layout -->

    <!-- Material Design Lite js Library -->
    <script type="text/javascript" src="https://storage.googleapis.com/code.getmdl.io/1.0.0/material.min.js"></script>
    
    <script rel="javascript" type="text/javascript" src="/js/search.js"></script>
    <script rel="javascript" type="text/javascript">
      superSearch({
        searchFile: '/feed.xml',
        searchSelector: '#js-search', // CSS Selector for search container element.
        inputSelector: '#js-search__input', // CSS selector for <input>
        resultsSelector: '#js-search__results' // CSS selector for results container
      });
    </script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-34423825-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

        gtag('config', 'UA-34423825-1');
</script>


  </body>

</html>
